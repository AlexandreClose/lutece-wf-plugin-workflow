<#include "macro_workflows.html" />
<div class="content-box">
  <h2> #i18n{workflow.create_action.title}</h2>
   <form action="jsp/admin/plugins/workflow/DoModifyAction.jsp?plugin_name=workflow" method="post" name="" id=""  >
	   <input name="id_action" value="${action.id}" type="hidden">
	   <div>
			<p>
		    	<label for="name">#i18n{workflow.create_action.label_name} * : </label>
		    	<input type="text" name="name" id="" size="80" value="${action.name}"  maxlength="255"/>
			 	<br/>
				<label>&nbsp;</label>#i18n{workflow.create_action.label_name_comment}
		   	</p>
		   	<p>
		     	<label for="description"> #i18n{workflow.create_action.label_description} * : </label>
		     	<textarea name="description" cols="80" rows="2">${action.description}</textarea>
		   		<br/>
		    	<label>&nbsp;</label>
				#i18n{workflow.create_action.label_description_comment}
		   	</p>
		   	<p>
		     	<label for="id_state_before"> #i18n{workflow.create_action.label_state_before} * : </label>
		    	<@combo name="id_state_before"  items=state_list default_value=action.stateBefore.id />	
		   		<br/>
		    	<label>&nbsp;</label>
				#i18n{workflow.create_action.label_state_before_comment}
		   	</p>
		   	<p>
		     	<label for="id_state_after"> #i18n{workflow.create_action.label_state_after} * : </label>
		    	<@combo name="id_state_after"  items=state_list default_value=action.stateAfter.id />	
		   		<br/>
		    	<label>&nbsp;</label>
				#i18n{workflow.create_action.label_state_after_comment}
		   	</p>
		    <p>
				<label for="id_icon"> #i18n{workflow.create_action.label_icon} * : </label>
			    <@radioIconList name="id_icon" default_value=action.icon.id icons=icon_list />	
			   	<br/>
			    <label>&nbsp;</label>
				#i18n{workflow.create_action.label_icon_comment}
		   	</p>
		   	<p>
		    	<label for="automatic">#i18n{workflow.create_action.label_automatic} : </label>
		    	<#if action.automaticState>
		    		<input type="checkbox" name="automatic" value="1" checked="checked" />
		    	<#else>	
		    		<input type="checkbox" name="automatic" value="1"/>
		    	</#if>
			 	<br/>
				<label>&nbsp;</label>#i18n{workflow.create_action.label_automatic_comment}
			</p>
			<p>
		    	<label for="is_mass_action">#i18n{workflow.create_action.label_mass_action} : </label>
		    	<#if action.massAction>
		    		<input type="checkbox" name="is_mass_action" value="1" checked="checked" />
		    	<#else>	
		    		<input type="checkbox" name="is_mass_action" value="1"/>
		    	</#if>
			 	<br/>
				<label>&nbsp;</label>#i18n{workflow.create_action.label_mass_action_comment}
			</p>
			<p>
				<label for="">#i18n{workflow.create_action.label_link_actions} :</label>
				#i18n{workflow.create_action.label_link_actions_comment}
				<br />
				<label>&nbsp;</label>
				#i18n{workflow.create_action.label_link_actions_example}
			</p>
			<table>
				<tr>
					<th>#i18n{workflow.create_action.label_available_linked_actions}</th>
					<th>&nbsp;</th>
					<th>#i18n{workflow.create_action.label_selected_linked_actions}</th>
				</tr>
				<tr>
					<td>
						<@comboWithParamsAndLength name="select_linked_actions" default_value="" additionalParameters="multiple='multiple' size='10' style='width:100%;'" items=available_linked_actions max_length=175 />
					</td>
					<td>
						<div align="center">
							<input class="button" type="submit" name="apply" value="#i18n{workflow.create_action.label_select_unselect_linked_actions}" />
						</div>
					</td>
					<td>
						<@comboWithParamsAndLength name="unselect_linked_actions" default_value="" additionalParameters="multiple='multiple' size='10' style='width:100%;'" items=selected_linked_actions max_length=175 />
					</td>
				</tr>
			</table>
		</div>
		<p>
	  		<input type="submit" value="#i18n{workflow.create_action.button_save}" class="button" name="save" />
	  		<input type="submit" value="#i18n{workflow.modify_action.button_apply}" class="button"  name="apply"/>
	  		<input type="submit" value="#i18n{workflow.create_action.button_cancel}" class="button" name="cancel" />
		</p>
 	</form>
 </div>
 <div class="content-box">
  <h2> #i18n{workflow.modify_action.manage_task.title}</h2>
  	 <form action="jsp/admin/plugins/workflow/DoInsertTask.jsp?plugin_name=workflow" method="post" name="" id=""  >
   		<input name="id_action" value="${action.id}" type="hidden">
   		<p>
		     <label for="task_type_key"> #i18n{workflow.modify_action.manage_task.insert_new_task}  : </label>
		    	 <@combo name="task_type_key"  items=task_type_list default_value=-1 />	
		   		<input type="submit" value="#i18n{workflow.create_action.button_insert_new_task}" class="button" name="save" />
		   		<br/>
		   		<label>&nbsp;</label>
				#i18n{workflow.modify_action.manage_task.warning_assignment}
		</p>
   	</form>
   	<table>
	    <tr>
	      <th>
	       #i18n{workflow.modify_action.manage_task.row_number}
	      </th>
	      <th>
	       #i18n{workflow.modify_action.manage_task.row_title}
	      </th>
	       <th>
	        #i18n{workflow.modify_action.manage_task.row_task_type}
	      </th>
	      <th>
	        #i18n{workflow.modify_action.manage_task.row_actions}
	      </th>
	    </tr>
	   <#assign cpt=0>	
	   <#list task_list as task>
	   
	   <#assign cpt=cpt+1>
	   <tr>
	      <td>
	      ${cpt}
	      </td>
	      <td>
	      	${task.getTitle(locale)}
	      </td>
	      <td>
	       	${task.taskType.title}
	      </td>
	       <td>
			  <#if task.taskType.configRequired>
				 <a href="jsp/admin/plugins/workflow/ModifyTask.jsp?id_task=${task.id}">
						 <img src="images/admin/skin/plugins/workflow/actions/modify.png" alt="#i18n{workflow.modify_action.manage_task.title_modify}" title="#i18n{workflow.manage_workflow.title_modify}" />
				  </a>
			  </#if>		 
				  <a href="jsp/admin/plugins/workflow/ConfirmRemoveTask.jsp?id_task=${task.id}">
						 <img src="images/admin/skin/plugins/workflow/actions/delete.png" alt="#i18n{workflow.modify_action.manage_task.title_delete}" title="#i18n{workflow.modify_action.manage_task.title_delete}" />
					</a>
			</td>
	    </tr>
	   </#list>
   </table>
  </div>   
   
 

